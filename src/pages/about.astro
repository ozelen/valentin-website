---
import PageLayout from '../layouts/PageLayout.astro';
import { getCollection, render } from 'astro:content';

const aboutEntries = await getCollection('about');
const aboutContent = aboutEntries[0]; // Get the single about entry
const { Content } = await render(aboutContent);

const roles = await getCollection('roles');
const sortedRoles = roles.sort((a, b) => (a.data.order || 0) - (b.data.order || 0));
---

<PageLayout
	title="About"
	description="Biography and academic background of Valentin Zelenyuk, Professor of Economics at The University of Queensland."
>
	<h1 class="text-4xl font-bold text-gray-900 mb-8">About</h1>
	
	<!-- Current Roles -->
	<section class="mb-12">
		<h2 class="text-2xl font-bold text-gray-900 mb-6">Current Roles</h2>
		<div class="grid md:grid-cols-2 gap-6">
			{sortedRoles.map((role) => (
				<a
					href={`/about/roles/${role.id}`}
					class="card hover:shadow-lg transition-shadow group"
				>
					<h3 class="text-lg font-semibold text-gray-900 mb-2 group-hover:text-primary-600 transition-colors">
						{role.data.role}
					</h3>
					<p class="text-gray-600 text-sm mb-3">{role.data.org}</p>
					<span class="text-primary-600 text-sm font-medium group-hover:underline">
						Learn more â†’
					</span>
				</a>
			))}
		</div>
	</section>

	<!-- About Content from Markdown -->
	<div class="prose-custom">
		<Content />
	</div>
</PageLayout>
